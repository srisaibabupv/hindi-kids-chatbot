<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <title>Hindi Story Chatbot</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(to bottom, #fffae6, #ffe6f0);
      text-align: center;
      padding: 20px;
    }
    #story {
      font-size: 24px;
      margin: 30px auto;
      width: 90%;
      min-height: 150px;
      background: #fff3e6;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 2px 2px 12px rgba(0,0,0,0.2);
    }
    button {
      font-size: 20px;
      padding: 15px 30px;
      margin: 10px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      background-color: #ff9966;
      color: white;
    }
    button:hover {
      background-color: #ff6600;
    }
  </style>
</head>
<body>

  <h1>ЁЯОЙ Hindi Story Chatbot ЁЯОЙ</h1>
  <div id="story">рдХрд╣рд╛рдиреА рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдиреАрдЪреЗ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред</div>
  <button id="startBtn">рд╕реНрдЯрд╛рд░реНрдЯ рд╕реНрдЯреЛрд░реА</button>
  <button id="speakBtn">ЁЯЧгя╕П рдмреЛрд▓реЛ рдЙрддреНрддрд░</button>

  <script>
    const storyDiv = document.getElementById('story');
    const startBtn = document.getElementById('startBtn');
    const speakBtn = document.getElementById('speakBtn');

    // ===== Story Array =====
    const story = [
      {
        text: "рдПрдХ рдмрд╛рд░ рдХреА рдмрд╛рдд рд╣реИ, рдПрдХ рдЫреЛрдЯрд╛ рд▓рдбрд╝рдХрд╛ рдЬрдВрдЧрд▓ рдореЗрдВ рдЦреЗрд▓ рд░рд╣рд╛ рдерд╛ред",
        question: "рдЙрд╕рдХрд╛ рдирд╛рдо рдХреНрдпрд╛ рдерд╛?",
        answer: "рд░рд╛рдЬреВ"
      },
      {
        text: "рд░рд╛рдЬреВ рдиреЗ рдЬрдВрдЧрд▓ рдореЗрдВ рдЦреЗрд▓рддреЗ-рдЦреЗрд▓рддреЗ рдПрдХ рд╕реБрдВрджрд░ рддрд┐рддрд▓реА рджреЗрдЦреАред",
        question: "рд░рд╛рдЬреВ рдиреЗ рдХреНрдпрд╛ рджреЗрдЦрд╛?",
        answer: "рддрд┐рддрд▓реА"
      },
      {
        text: "рддрд┐рддрд▓реА рдХреЗ рдкреАрдЫреЗ-рдкреАрдЫреЗ рд╡рд╣ рдПрдХ рдЭрд░рдиреЗ рддрдХ рдкрд╣реБрдБрдЪрд╛ред",
        question: "рд░рд╛рдЬреВ рдХрд╣рд╛рдБ рдкрд╣реБрдБрдЪрд╛?",
        answer: "рдЭрд░рдирд╛"
      },
      {
        text: "рд░рд╛рдЬреВ рдиреЗ рдЭрд░рдиреЗ рдХреЗ рдкрд╛рд╕ рдЦреЗрд▓рд╛ рдФрд░ рдЦреБрд╢ рд╣реБрдЖред",
        question: null,
        answer: null
      }
    ];

    let index = 0;

    // ===== Text-to-Speech =====
    function speak(text) {
      const msg = new SpeechSynthesisUtterance(text);
      msg.lang = 'hi-IN';
      window.speechSynthesis.speak(msg);
    }

    // ===== Start Story =====
    startBtn.onclick = () => {
      index = 0;
      storyDiv.innerHTML = story[index].text;
      speak(story[index].text);
    }

    // ===== Speech Recognition =====
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (!SpeechRecognition) {
      alert("рдЖрдкрдХреЗ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдореЗрдВ рд╡реЙрдЗрд╕ рд░рд┐рдХрдЧреНрдирд┐рд╢рди рд╕рдкреЛрд░реНрдЯ рдирд╣реАрдВ рд╣реИред рдХреГрдкрдпрд╛ рдХреНрд░реЛрдо рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред");
    }
    const recognizer = new SpeechRecognition();
    recognizer.lang = 'hi-IN';
    recognizer.continuous = false;

    speakBtn.onclick = () => {
      if (!story[index] || !story[index].question) {
        storyDiv.innerHTML = "рдХрд╣рд╛рдиреА рд╕рдорд╛рдкреНрдд рд╣реЛ рдЧрдИ рд╣реИред";
        speak("рдХрд╣рд╛рдиреА рд╕рдорд╛рдкреНрдд рд╣реЛ рдЧрдИ рд╣реИред");
        return;
      }

      speak("рдХреГрдкрдпрд╛ рдЙрддреНрддрд░ рдмреЛрд▓реЗрдВред");
      recognizer.start();
    }

    recognizer.onresult = (event) => {
      const userAnswer = event.results[0][0].transcript.trim().toLowerCase();
      const correctAnswer = story[index].answer.toLowerCase();

      if (userAnswer === correctAnswer) {
        storyDiv.innerHTML = `рд╢рд╛рдмрд╛рд╢! рд╕рд╣реА рдЙрддреНрддрд░ рд╣реИ: ${story[index].answer}`;
        speak(`рд╢рд╛рдмрд╛рд╢! рд╕рд╣реА рдЙрддреНрддрд░ рд╣реИ: ${story[index].answer}`);
      } else {
        storyDiv.innerHTML = `рдХреЛрд╢рд┐рд╢ рдХрд░реЛред рд╕рд╣реА рдЙрддреНрддрд░ рд╣реИ: ${story[index].answer}`;
        speak(`рдХреЛрд╢рд┐рд╢ рдХрд░реЛред рд╕рд╣реА рдЙрддреНрддрд░ рд╣реИ: ${story[index].answer}`);
      }

      // Move to next part of story
      index++;
      if (story[index]) {
        setTimeout(() => {
          storyDiv.innerHTML = story[index].text;
          speak(story[index].text);
        }, 2500);
      } else {
        setTimeout(() => {
          storyDiv.innerHTML = "рдХрд╣рд╛рдиреА рд╕рдорд╛рдкреНрдд рд╣реЛ рдЧрдИ рд╣реИред";
          speak("рдХрд╣рд╛рдиреА рд╕рдорд╛рдкреНрдд рд╣реЛ рдЧрдИ рд╣реИред");
        }, 2500);
      }
    }
  </script>
</body>
</html>
